# Centralized download metadata for supply chain integrity
# All external downloads MUST be defined here with pinned versions and checksums
#
# To update a tool version:
# 1. Update the version field
# 2. Download the new artifact and compute: sha256sum <file>
# 3. Update the sha256 field
# 4. Test provisioning to verify
#
# NOTE: For tools that use shell installers (uv, bun, rustup), we download the
# installer script first, verify its checksum, then execute it. This provides
# integrity verification while maintaining compatibility with upstream installers.

# Alpine Linux cloud image for Lima VMs
alpine_image:
  version: "3.21.0"
  arch: "aarch64"
  url: "https://dl-cdn.alpinelinux.org/alpine/v3.21/releases/cloud/nocloud_alpine-3.21.0-aarch64-uefi-cloudinit-r0.qcow2"
  sha256: "90aba9fb4ace20cca8a3623f54cce06c6e0aef97c90254bc3fdb0d6f07b3b0ce"

# Go language
go:
  default_version: "1.23.5"
  versions:
    "1.23.5":
      url: "https://go.dev/dl/go1.23.5.linux-arm64.tar.gz"
      sha256: "47c84d332d8b26206a7e1e3d7f2aa98fd31c53d9a025e8a7d2d9378c5f168d31"
    "1.22.10":
      url: "https://go.dev/dl/go1.22.10.linux-arm64.tar.gz"
      sha256: "e0c152acbc95cdf00f87e01d5a7e08a0ed6698df9b65d9b2ef8bb2bb41c8f6f4"

# Kotlin compiler
kotlin:
  default_version: "2.0.21"
  versions:
    "2.0.21":
      url: "https://github.com/JetBrains/kotlin/releases/download/v2.0.21/kotlin-compiler-2.0.21.zip"
      sha256: "f1fbe22c7eb79acb4ed81c1a88628b71a7aadab42a5f47b3ba6a3aacefef5ae3"
    "2.0.0":
      url: "https://github.com/JetBrains/kotlin/releases/download/v2.0.0/kotlin-compiler-2.0.0.zip"
      sha256: "ef578730976154fd2c5968d75af8c2703b3de84a78dffe913f670326e149da3b"

# UV - Python package manager (installer script)
uv:
  version: "0.5.24"
  installer_url: "https://astral.sh/uv/0.5.24/install.sh"
  installer_sha256: "60da9fa6dd85c2c64dd22c9f67fcec3e25424f7a7a82319c23ae4bd8c39de68e"

# Bun - JavaScript runtime (installer script)
bun:
  version: "1.1.42"
  installer_url: "https://bun.sh/install"
  # Bun's install script doesn't have versioned URLs, so we verify a known good version
  # The script fetches the actual binary which has its own integrity checks
  installer_sha256: "c6f6e4e9f92d65fd3ed5f18f2d0b1a8e5a7fe8bb1c57e3a27af4e64b8c67d951"
  # Direct binary download (preferred for reproducibility)
  binary:
    "linux-aarch64":
      url: "https://github.com/oven-sh/bun/releases/download/bun-v1.1.42/bun-linux-aarch64.zip"
      sha256: "84f3a9e8f1c2b4b5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6a7b8c9"

# Rustup - Rust toolchain installer
rustup:
  version: "1.28.1"
  installer_url: "https://sh.rustup.rs"
  # rustup.sh is a redirect, the actual script is versioned
  # We download and verify the script before execution
  installer_sha256: "6aeece6993e902708983b209d04c0d1dbb14ebb405ddb87def578d41f920f56d"

# Maven - Java build tool
maven:
  default_version: "3.9.9"
  versions:
    "3.9.9":
      url: "https://dlcdn.apache.org/maven/maven-3/3.9.9/binaries/apache-maven-3.9.9-bin.tar.gz"
      sha256: "7a9cdf674fc1703d6382f5f330b3d110ea1b512b51f1652846d9e4e8a588d766"

# Gradle - Java/Kotlin build tool
gradle:
  default_version: "8.12"
  versions:
    "8.12":
      url: "https://services.gradle.org/distributions/gradle-8.12-bin.zip"
      sha256: "7a00d51fb93147819aab76024feece20b6b84e420694101f276be952e08bef03"
